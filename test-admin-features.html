<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Admin Features</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 2rem;
        }

        .test-section {
            margin: 2rem 0;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        button {
            padding: 0.5rem 1rem;
            margin: 0.5rem;
            background: #00d4ff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .result {
            margin-top: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 4px;
        }
    </style>
</head>

<body>
    <h1>Admin Features Test</h1>

    <div class="test-section">
        <h2>1. Create Test Contact</h2>
        <button onclick="createTestContact()">Create Test Contact</button>
        <div id="createResult" class="result" style="display: none;"></div>
    </div>

    <div class="test-section">
        <h2>2. Test API Endpoints</h2>
        <button onclick="testGetContacts()">Test Get Contacts</button>
        <button onclick="testGetStats()">Test Get Stats</button>
        <div id="apiResult" class="result" style="display: none;"></div>
    </div>

    <div class="test-section">
        <h2>3. Admin Panel</h2>
        <button onclick="openAdmin()">Open Admin Panel</button>
        <p>Test the following features in the admin panel:</p>
        <ul>
            <li>✅ Enhanced contact details modal</li>
            <li>✅ Bulk selection and actions</li>
            <li>✅ CSV export functionality</li>
            <li>✅ Contact notes system</li>
            <li>✅ Priority management</li>
            <li>✅ Real-time updates with visual feedback</li>
        </ul>
    </div>

    <script>
        const API_BASE = 'http://localhost:3000/api';

        async function createTestContact() {
            const testData = {
                name: 'Test User ' + Date.now(),
                email: 'test@example.com',
                subject: 'Test Subject - Admin Features',
                message: 'This is a test message to verify the admin panel enhancements work correctly.'
            };

            try {
                const response = await fetch(`${API_BASE}/contact`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(testData)
                });

                const result = await response.json();
                const resultDiv = document.getElementById('createResult');
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = `<strong>Result:</strong> ${JSON.stringify(result, null, 2)}`;
            } catch (error) {
                const resultDiv = document.getElementById('createResult');
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = `<strong>Error:</strong> ${error.message}`;
            }
        }

        async function testGetContacts() {
            try {
                const response = await fetch(`${API_BASE}/contact`);
                const result = await response.json();
                const resultDiv = document.getElementById('apiResult');
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = `<strong>Contacts API:</strong> Found ${result.data?.contacts?.length || 0} contacts`;
            } catch (error) {
                const resultDiv = document.getElementById('apiResult');
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = `<strong>Error:</strong> ${error.message}`;
            }
        }

        async function testGetStats() {
            try {
                const response = await fetch(`${API_BASE}/contact/stats/dashboard`);
                const result = await response.json();
                const resultDiv = document.getElementById('apiResult');
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = `<strong>Stats API:</strong> ${JSON.stringify(result.data, null, 2)}`;
            } catch (error) {
                const resultDiv = document.getElementById('apiResult');
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = `<strong>Error:</strong> ${error.message}`;
            }
        }

        function openAdmin() {
            window.open('http://localhost:8000/admin.html', '_blank');
        }
    </script>
</body>

</html>